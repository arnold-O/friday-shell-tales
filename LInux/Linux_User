Understanding Users in Linux

Creating and managing users

Understanding user properties

Understanding user configuration files

Managing users and groups

In the Linux environment, there are two common types of users: system (service) users and human users. Service users are created for running services and require access only to specific configuration files. If proper access is not provided, a service may default to using the root account. In Linux, this is discouraged because the root account is extremely powerful, and its usage should be minimized.

Service accounts are typically created by the system and use user IDs (UIDs) in the range of 1–999.

Human users, or users created for people who need access to a server or client machine, generally have UIDs starting from 1000. These users are assigned login shells such as /bin/bash or /bin/sh. In contrast, service users usually do not require interactive logins and are often assigned shells like /sbin/nologin.

Among all users, there is a special user with UID 0, which bypasses all security restrictions. This user is known as the root user.



1. **Creating Users**

There is a shortcut I often use when working on Linux to get a broader overview of the command or utility I am working with. This approach has been helpful across many Linux distributions.

When you encounter a command that you are not familiar with, you can type the command name and press the Tab key twice to display available options. Alternatively, you can use the --help flag to view usage information and available options for the command (as shown in the image below).

i. The figure is for clicking tab twice for more options
![more options](image.png)

ii. This figure is for using the --help flag on a command.
![more options](image-1.png)

When creating a user in Linux, we use the useradd command. This command creates the user account and, by default, also creates a home directory for the user, usually located at /home/<username>. It is important to note that the default home directory location can be modified at the time of user creation.

When a user account is created, several files are automatically added to the user’s home directory. These files help configure the user’s shell environment, especially for Bash users. This is done using the skeleton directory, located at /etc/skel.

The /etc/skel directory contains default files that are copied into a new user’s home directory during account creation. By customizing /etc/skel, administrators can ensure that every new user starts with specific configuration files (as shown in the image below).

For example, a test user named testuser has been created, and its home directory is located under /home.

![create user](image-3.png)

![user in home directory](image-2.png)


When we navigate to a user’s home directory, some files are hidden by default and are not displayed with the standard ls command. To view these files, we can use the -a flag with ls, which shows all files, including hidden ones.

For example, running:
ls -a   
This command above will reveal all hidden files that were added to the user’s home directory during account creation.

![user directory files](image-4.png)

From the image above, we can see the default files that are added to a user’s home directory during account creation. To demonstrate that we can customize these files ourselves, I will add a file to the /etc/skel directory and then create a new user. The files from /etc/skel will be copied into the new user’s home directory.

Note: I created two files in /etc/skel to avoid confusion with using a dot (.) to create hidden files.

![skel directory](image-5.png)

![files created ](image-6.png)


Before moving forward to user properties and their modifications, there is also a one-liner approach in creating a user , that helps sets alot of user properties.

**useradd -m -d /home/testuser3  -c "Testuser Three" -s /bin/bash -G teamthree  -u 1035 -g users -e 2027-12-31 testuser3**

-m → create home directory

-d /home/username → set custom home directory

-c "Full Name" → comment (usually full name)

-s /bin/bash → login shell

-G sudo,developers → supplementary groups

-u 1001 → specific UID

-g users → primary group

-e YYYY-MM-DD → account expiration date


2. **User Configuration files**


These files are important to user management in linux

/etc/defaults/useradd
/etc/login.defs
/etc/passwd
/etc/shadow
/etc/group

The first two files /etc/defaults and /etc/login.defs are conflicting sometimes but if decisions comes down to these files the /etc/login.defs takes lead. 

/etc/skel   this is the skeleton directory
/etc/passwd  This directory houses a bulk of user details
/ec/shadow  Here you find password management properties
/ec/group This help manage user group details and can be understood better in man 5 page of the linux manual.


For a one-liner approach to creating a user, many default parameters can be specified. For example, if a specific user ID (UID) is assigned—say 1234—then for subsequent users created without explicitly specifying a UID, the system will continue the sequence. In this case, the next user created will automatically receive UID 1235, maintaining a consistent order.


3. Adding a user to a group

To explore available group-related commands and options, type group and press the Tab key twice.

User group information and properties are stored in the /etc/group file. Groups are created to help organize users and manage membership more efficiently.

The /etc/group file can be edited using standard text editors like vi or vim. However, it is recommended to use the special command vigr, which is specifically designed for safely editing group information.

When using vigr, a temporary copy of the file is created. Changes are only applied to the actual /etc/group file when you explicitly save and exit the editor, which helps prevent accidental corruption of the group file.

Usermod command aalso help to manager user group with options like 
- g make the user group as primary group
- G New list of the supplementary list
- a Appends users to supplementary group

To see the properties and group of a user use id and the user name e.g id <username>

User Groups

In Linux, there are two types of groups:

Primary Group

Secondary Group

Primary Group: This is a mandatory group that is automatically created when a user is added. By default, the name of the primary group is the same as the username. The primary group is mainly used for file ownership and permission management.

Secondary Group: Secondary groups are used to grant additional permissions or special functions to a user. A common example is adding a user to the sudo group, which gives the user administrative (root) privileges.

To check the primary and secondary groups a user belongs to, use the command:

id <username>


The output lists the primary group first, followed by any secondary groups.

By checking the relevant files below, you can see which users have a login shell and which have a no-login shell. Users with a login shell are typically human users, while accounts with a no-login shell are usually service (process) accounts.

If a service account’s shell is changed—for example, from /sbin/nologin to /bin/bash, that account can now be used to log in like any other human user. In other words, even if a process or service account is originally configured as no-login, changing its shell to one that allows login effectively grants it interactive access.

![service/process accounts](image-7.png)

![human users](image-8.png)








